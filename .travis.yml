language: ruby
cache: bundler
sudo: false
addons:
  chrome: stable
before_script:
- psql -c 'create database biblestudy_platform_test;' -U postgres
- gem install bundler
script: bundle exec rspec
before_install:
- "/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --headless --disable-gpu
  --remote-debugging-port=9222 http://localhost &"
- ln -s /usr/lib/chromium-browser/chromedriver ~/bin/chromedriver
- gem update bundler
services:
- postgresql
deploy:
  provider: heroku
  api_key:
    secure: GgHjekcEgxlKGgAvsaGEbhW+lH5p7IbpbnmWeyBwLjhx6eYiLi3hfcaDGUKjD9yrHI2ZQ7FVCd/jMFsMFcnH6iGzw0ZOQx1WuRzeY/MdkOCUCvMrcr7gD5iasuiy1sRnyyUdSCgUFBP6nwGgfV5E37jxRvKlkerKbaYTdv9v1ezHQ3Pw4+BKSLNYOEEeGYX7v3T0lB57uPiACm26HM5zXNU7tDFo8G3To6bjICokZmy3McmzDhh6hIOiToZ3Fua/nQBc0o0NoJwlGhskGRS4E19SyEEbeB/xbmvWgYLgK9ESNvT5i5PqR2W1HNgooMEp01Z2CxrEkXjbXiNWu9IBQ29UOOBylrQd+xd26cwJz3bOi+xpH1Ie0+jbmP648a5gxL01e2Ffv+pC4AIqPXWGzvbMBZyEJ9yEhyJpVMoSl8uU6aOIgypceYJb9xnDYib9xtZpL587lZFyGYbppyCg8MIhgojnqOAB3AMzV6U+mQKQaZBpxxwBaiec+eizT9xKgTkGucHqqtowbrtV5+C98wGc1xCWOphPpulRQo3EwU0as7hlk0Aj/l2qdG0wbOQDgTOkiighIH6pIIxDyBfVptWIeHkWOSLIL153TIaMutHFQ9cEEeALG7s4EJOo1397FCAkDMG235z5h1C2kZFO1HGaib0w3AvAlWV0bTEunVA=
  app: biblestudy-platform
  on:
    repo: andreheijstek/biblestudy_platform
  skip_cleanup: true
notifications:
  email:
  - andre.heijstek@gmail.com
